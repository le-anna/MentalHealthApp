{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/Users/annale/Documents/MentalHealthApp/Frontend/MentalHealthFrontend/node_modules/react-native-calendar/components/Calendar.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport View from \"react-native-web/dist/exports/View\";\nimport PropTypes from 'prop-types';\nimport Day from \"./Day\";\nimport moment from 'moment';\nimport styles from \"./styles\";\nvar VIEW_INDEX = 2;\n\nfunction getNumberOfWeeks(month, weekStart) {\n  var firstDay = moment(month).startOf('month').day();\n  var offset = (firstDay - weekStart + 7) % 7;\n  var days = moment(month).daysInMonth();\n  return Math.ceil((offset + days) / 7);\n}\n\nvar Calendar = function (_Component) {\n  _inherits(Calendar, _Component);\n\n  var _super = _createSuper(Calendar);\n\n  function Calendar() {\n    var _this;\n\n    _classCallCheck(this, Calendar);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      currentMoment: moment(_this.props.startDate),\n      selectedMoment: _this.props.selectedDate && moment(_this.props.selectedDate),\n      rowHeight: null,\n      containerWidth: null\n    };\n\n    _this.onPrev = function () {\n      var newMoment = _this.props.calendarFormat === 'monthly' ? moment(_this.state.currentMoment).subtract(1, 'month') : moment(_this.state.currentMoment).subtract(1, 'week');\n\n      _this.setState({\n        currentMoment: newMoment\n      });\n\n      _this.props.onTouchPrev && _this.props.onTouchPrev(newMoment);\n    };\n\n    _this.onNext = function () {\n      var newMoment = _this.props.calendarFormat === 'monthly' ? moment(_this.state.currentMoment).add(1, 'month') : moment(_this.state.currentMoment).add(1, 'week');\n\n      _this.setState({\n        currentMoment: newMoment\n      });\n\n      _this.props.onTouchNext && _this.props.onTouchNext(newMoment);\n    };\n\n    _this.onWeekRowLayout = function (event) {\n      if (_this.state.rowHeight !== event.nativeEvent.layout.height) {\n        _this.setState({\n          rowHeight: event.nativeEvent.layout.height\n        });\n      }\n    };\n\n    _this.onContainerLayout = function (event) {\n      if (_this.state.containerWidth !== event.nativeEvent.layout.width) {\n        _this.setState({\n          containerWidth: event.nativeEvent.layout.width\n        });\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(Calendar, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      setTimeout(function () {\n        return _this2.scrollToItem(VIEW_INDEX);\n      }, 0);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      this.scrollToItem(VIEW_INDEX);\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (nextProps.selectedDate && this.props.selectedDate !== nextProps.selectedDate) {\n        this.setState({\n          selectedMoment: nextProps.selectedDate\n        });\n      }\n\n      if (nextProps.currentMonth) {\n        this.setState({\n          currentMoment: moment(nextProps.currentMonth)\n        });\n      }\n    }\n  }, {\n    key: \"getStack\",\n    value: function getStack(currentMoment) {\n      if (this.props.scrollEnabled) {\n        var i = -VIEW_INDEX;\n        var res = [];\n\n        for (i; i <= VIEW_INDEX; i++) {\n          if (this.props.calendarFormat === 'monthly') {\n            res.push(moment(currentMoment).add(i, 'month'));\n          } else {\n            res.push(moment(currentMoment).add(i, 'week'));\n          }\n        }\n\n        return res;\n      }\n\n      return [moment(currentMoment)];\n    }\n  }, {\n    key: \"prepareEventDates\",\n    value: function prepareEventDates(eventDates, events) {\n      var parsedDates = {};\n\n      if (events) {\n        events.forEach(function (event) {\n          if (event.date) {\n            parsedDates[event.date] = event;\n          }\n        });\n      } else {\n        eventDates.forEach(function (event) {\n          parsedDates[event] = {};\n        });\n      }\n\n      return parsedDates;\n    }\n  }, {\n    key: \"selectDate\",\n    value: function selectDate(date) {\n      if (this.props.selectedDate === undefined) {\n        this.setState({\n          selectedMoment: date,\n          currentMoment: date\n        });\n      }\n    }\n  }, {\n    key: \"selectAndJumpToToday\",\n    value: function selectAndJumpToToday() {\n      var today = new Date();\n      var newMoment = moment(this.state.currentMoment).set('month', today.getMonth());\n      this.setState({\n        selectedMoment: today,\n        currentMoment: newMoment\n      });\n    }\n  }, {\n    key: \"scrollToItem\",\n    value: function scrollToItem(itemIndex) {\n      var containerWidth = this.state.containerWidth;\n\n      if (containerWidth == null) {\n        return;\n      }\n\n      var scrollToX = itemIndex * containerWidth;\n\n      if (this.props.scrollEnabled && this._calendar) {\n        this._calendar.scrollTo({\n          y: 0,\n          x: scrollToX,\n          animated: false\n        });\n      }\n    }\n  }, {\n    key: \"scrollEnded\",\n    value: function scrollEnded(event) {\n      var containerWidth = this.state.containerWidth;\n\n      if (containerWidth == null) {\n        return;\n      }\n\n      var position = event.nativeEvent.contentOffset.x;\n      var currentPage = position / containerWidth;\n      var newMoment = this.props.calendarFormat === 'monthly' ? moment(this.state.currentMoment).add(currentPage - VIEW_INDEX, 'month') : moment(this.state.currentMoment).add(currentPage - VIEW_INDEX, 'week');\n      this.setState({\n        currentMoment: newMoment\n      });\n\n      if (currentPage < VIEW_INDEX) {\n        this.props.onSwipePrev && this.props.onSwipePrev(newMoment);\n      } else if (currentPage > VIEW_INDEX) {\n        this.props.onSwipeNext && this.props.onSwipeNext(newMoment);\n      }\n    }\n  }, {\n    key: \"getStartMoment\",\n    value: function getStartMoment(calFormat, currMoment) {\n      var weekStart = this.props.weekStart;\n      var res;\n\n      if (calFormat === 'monthly') {\n        res = moment(currMoment).startOf('month');\n      } else {\n        var sundayMoment = moment(currMoment).startOf('week');\n\n        if (weekStart > 0) {\n          res = moment(currMoment).isoWeekday(weekStart);\n\n          if (res.diff(currMoment) > 0) {\n            res = moment(currMoment).subtract(7, 'day').isoWeekday(weekStart);\n          }\n        } else {\n          res = sundayMoment;\n        }\n      }\n\n      return res;\n    }\n  }, {\n    key: \"renderCalendarView\",\n    value: function renderCalendarView(calFormat, argMoment, eventsMap) {\n      var _this3 = this;\n\n      var renderIndex = 0,\n          weekRows = [],\n          days = [];\n      var startOfArgMoment = this.getStartMoment(calFormat, argMoment),\n          selectedMoment = moment(this.state.selectedMoment),\n          weekStart = this.props.weekStart,\n          todayMoment = moment(this.props.today),\n          todayIndex = todayMoment.date() - 1,\n          argDaysCount = calFormat === 'monthly' ? argMoment.daysInMonth() : 7,\n          offset = calFormat === 'monthly' ? (startOfArgMoment.isoWeekday() - weekStart + 7) % 7 : 0,\n          selectedIndex = moment(selectedMoment).date() - 1;\n\n      var _loop = function _loop() {\n        var dayIndex = renderIndex - offset;\n        var isoWeekday = (renderIndex + weekStart) % 7;\n        var thisMoment = moment(startOfArgMoment).add(dayIndex, 'day');\n\n        if (dayIndex >= 0 && dayIndex < argDaysCount) {\n          days.push(_this3.renderDay({\n            startOfMonth: startOfArgMoment,\n            isWeekend: isoWeekday === 0 || isoWeekday === 6,\n            key: renderIndex,\n            onPress: function onPress() {\n              _this3.selectDate(thisMoment);\n\n              _this3.props.onDateSelect && _this3.props.onDateSelect(thisMoment ? thisMoment.format() : null);\n            },\n            onLongPress: function onLongPress() {\n              _this3.selectDate(thisMoment);\n\n              _this3.props.onDateLongPress && _this3.props.onDateLongPress(thisMoment ? thisMoment.format() : null);\n            },\n            caption: thisMoment.format('D'),\n            isToday: todayMoment.format('YYYY-MM-DD') === thisMoment.format('YYYY-MM-DD'),\n            isSelected: selectedMoment.isSame(thisMoment),\n            event: eventsMap[thisMoment.format('YYYY-MM-DD')] || eventsMap[thisMoment.format('YYYYMMDD')],\n            showEventIndicators: _this3.props.showEventIndicators,\n            customStyle: _this3.props.customStyle\n          }));\n        } else {\n          days.push(_this3.renderDay({\n            key: renderIndex,\n            filler: true,\n            customStyle: _this3.props.customStyle\n          }));\n        }\n\n        if (renderIndex % 7 === 6) {\n          weekRows.push(React.createElement(View, {\n            key: weekRows.length,\n            onLayout: weekRows.length ? undefined : _this3.onWeekRowLayout,\n            style: [styles.weekRow, _this3.props.customStyle.weekRow],\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 11\n            }\n          }, days));\n          days = [];\n\n          if (dayIndex + 1 >= argDaysCount) {\n            return \"break\";\n          }\n        }\n\n        renderIndex += 1;\n      };\n\n      do {\n        var _ret = _loop();\n\n        if (_ret === \"break\") break;\n      } while (true);\n\n      var containerStyle = [styles.monthContainer, {\n        width: this.state.containerWidth\n      }, this.props.customStyle.monthContainer];\n      return React.createElement(View, {\n        key: startOfArgMoment.format('YYYY-MM-DD') + \"-\" + calFormat,\n        style: containerStyle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 12\n        }\n      }, weekRows);\n    }\n  }, {\n    key: \"renderDay\",\n    value: function renderDay(props) {\n      if (this.props.renderDay) {\n        return this.props.renderDay(props);\n      }\n\n      return React.createElement(Day, _extends({}, props, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 12\n        }\n      }));\n    }\n  }, {\n    key: \"renderHeading\",\n    value: function renderHeading() {\n      var headings = [];\n      var i = 0;\n\n      for (i; i < 7; ++i) {\n        var j = (i + this.props.weekStart) % 7;\n        headings.push(React.createElement(Text, {\n          key: i,\n          style: j === 0 || j === 6 ? [styles.weekendHeading, this.props.customStyle.weekendHeading] : [styles.dayHeading, this.props.customStyle.dayHeading],\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 9\n          }\n        }, this.props.dayHeadings[j]));\n      }\n\n      return React.createElement(View, {\n        style: [styles.calendarHeading, this.props.customStyle.calendarHeading],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 7\n        }\n      }, headings);\n    }\n  }, {\n    key: \"renderTopBar\",\n    value: function renderTopBar() {\n      var _this4 = this;\n\n      var localizedMonth = this.props.monthNames[this.state.currentMoment.month()];\n      return this.props.showControls ? React.createElement(View, {\n        style: [styles.calendarControls, this.props.customStyle.calendarControls],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 9\n        }\n      }, React.createElement(TouchableOpacity, {\n        style: [styles.controlButton, this.props.customStyle.controlButton],\n        onPress: this.onPrev,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 11\n        }\n      }, React.createElement(Text, {\n        style: [styles.controlButtonText, this.props.customStyle.controlButtonText],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 13\n        }\n      }, this.props.prevButtonText)), React.createElement(TouchableOpacity, {\n        style: styles.title,\n        onPress: function onPress() {\n          return _this4.props.onTitlePress && _this4.props.onTitlePress();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 11\n        }\n      }, React.createElement(Text, {\n        style: [styles.titleText, this.props.customStyle.title],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 13\n        }\n      }, localizedMonth, \" \", this.state.currentMoment.year())), React.createElement(TouchableOpacity, {\n        style: [styles.controlButton, this.props.customStyle.controlButton],\n        onPress: this.onNext,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 11\n        }\n      }, React.createElement(Text, {\n        style: [styles.controlButtonText, this.props.customStyle.controlButtonText],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 13\n        }\n      }, this.props.nextButtonText))) : React.createElement(View, {\n        style: [styles.calendarControls, this.props.customStyle.calendarControls],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 9\n        }\n      }, React.createElement(Text, {\n        style: [styles.title, this.props.customStyle.title],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 11\n        }\n      }, this.state.currentMoment.format(this.props.titleFormat)));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      var containerStyle = [styles.calendarContainer, this.props.customStyle.calendarContainer];\n\n      if (this.state.containerWidth == null) {\n        return React.createElement(View, {\n          onLayout: this.onContainerLayout,\n          style: containerStyle,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 383,\n            columnNumber: 16\n          }\n        });\n      }\n\n      var calendarDates = this.getStack(this.state.currentMoment);\n      var eventDatesMap = this.prepareEventDates(this.props.eventDates, this.props.events);\n      var numOfWeeks = this.props.calendarFormat === 'weekly' ? 1 : getNumberOfWeeks(this.state.currentMoment, this.props.weekStart);\n      return React.createElement(View, {\n        onLayout: this.onContainerLayout,\n        style: containerStyle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 7\n        }\n      }, this.renderTopBar(), this.renderHeading(this.props.titleFormat), this.props.scrollEnabled ? React.createElement(ScrollView, {\n        ref: function ref(calendar) {\n          return _this5._calendar = calendar;\n        },\n        horizontal: true,\n        scrollEnabled: true,\n        pagingEnabled: true,\n        removeClippedSubviews: this.props.removeClippedSubviews,\n        scrollEventThrottle: 1000,\n        showsHorizontalScrollIndicator: false,\n        automaticallyAdjustContentInsets: false,\n        onMomentumScrollEnd: function onMomentumScrollEnd(event) {\n          return _this5.scrollEnded(event);\n        },\n        style: {\n          height: this.state.rowHeight ? this.state.rowHeight * numOfWeeks : null\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 11\n        }\n      }, calendarDates.map(function (date) {\n        return _this5.renderCalendarView(_this5.props.calendarFormat, moment(date), eventDatesMap);\n      })) : React.createElement(View, {\n        ref: function ref(calendar) {\n          return _this5._calendar = calendar;\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 412,\n          columnNumber: 11\n        }\n      }, calendarDates.map(function (date) {\n        return _this5.renderCalendarView(_this5.props.calendarFormat, moment(date), eventDatesMap);\n      })));\n    }\n  }]);\n\n  return Calendar;\n}(Component);\n\nCalendar.propTypes = {\n  currentMonth: PropTypes.any,\n  customStyle: PropTypes.object,\n  dayHeadings: PropTypes.array,\n  eventDates: PropTypes.array,\n  monthNames: PropTypes.array,\n  nextButtonText: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  onDateSelect: PropTypes.func,\n  onDateLongPress: PropTypes.func,\n  onSwipeNext: PropTypes.func,\n  onSwipePrev: PropTypes.func,\n  onTouchNext: PropTypes.func,\n  onTouchPrev: PropTypes.func,\n  onTitlePress: PropTypes.func,\n  prevButtonText: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  removeClippedSubviews: PropTypes.bool,\n  scrollEnabled: PropTypes.bool,\n  selectedDate: PropTypes.any,\n  showControls: PropTypes.bool,\n  showEventIndicators: PropTypes.bool,\n  startDate: PropTypes.any,\n  titleFormat: PropTypes.string,\n  today: PropTypes.any,\n  weekStart: PropTypes.number,\n  calendarFormat: PropTypes.string\n};\nCalendar.defaultProps = {\n  customStyle: {},\n  dayHeadings: ['S', 'M', 'T', 'W', 'T', 'F', 'S'],\n  eventDates: [],\n  monthNames: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n  nextButtonText: 'Next',\n  prevButtonText: 'Prev',\n  removeClippedSubviews: true,\n  scrollEnabled: false,\n  showControls: false,\n  showEventIndicators: false,\n  startDate: moment().format('YYYY-MM-DD'),\n  titleFormat: 'MMMM YYYY',\n  weekStart: 1,\n  calendarFormat: 'monthly'\n};\nexport { Calendar as default };","map":{"version":3,"sources":["/Users/annale/Documents/MentalHealthApp/Frontend/MentalHealthFrontend/node_modules/react-native-calendar/components/Calendar.js"],"names":["React","Component","PropTypes","Day","moment","styles","VIEW_INDEX","getNumberOfWeeks","month","weekStart","firstDay","startOf","day","offset","days","daysInMonth","Math","ceil","Calendar","state","currentMoment","props","startDate","selectedMoment","selectedDate","rowHeight","containerWidth","onPrev","newMoment","calendarFormat","subtract","setState","onTouchPrev","onNext","add","onTouchNext","onWeekRowLayout","event","nativeEvent","layout","height","onContainerLayout","width","setTimeout","scrollToItem","nextProps","currentMonth","scrollEnabled","i","res","push","eventDates","events","parsedDates","forEach","date","undefined","today","Date","set","getMonth","itemIndex","scrollToX","_calendar","scrollTo","y","x","animated","position","contentOffset","currentPage","onSwipePrev","onSwipeNext","calFormat","currMoment","sundayMoment","isoWeekday","diff","argMoment","eventsMap","renderIndex","weekRows","startOfArgMoment","getStartMoment","todayMoment","todayIndex","argDaysCount","selectedIndex","dayIndex","thisMoment","renderDay","startOfMonth","isWeekend","key","onPress","selectDate","onDateSelect","format","onLongPress","onDateLongPress","caption","isToday","isSelected","isSame","showEventIndicators","customStyle","filler","length","weekRow","containerStyle","monthContainer","headings","j","weekendHeading","dayHeading","dayHeadings","calendarHeading","localizedMonth","monthNames","showControls","calendarControls","controlButton","controlButtonText","prevButtonText","title","onTitlePress","titleText","year","nextButtonText","titleFormat","calendarContainer","calendarDates","getStack","eventDatesMap","prepareEventDates","numOfWeeks","renderTopBar","renderHeading","calendar","removeClippedSubviews","scrollEnded","map","renderCalendarView","propTypes","any","object","array","oneOfType","string","func","bool","number","defaultProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {\n  Dimensions,\n  ScrollView,\n  Text,\n  TouchableOpacity,\n  View,\n} from 'react-native';\nimport PropTypes from 'prop-types';\n\nimport Day from './Day';\n\nimport moment from 'moment';\nimport styles from './styles';\n\nconst VIEW_INDEX = 2;\n\nfunction getNumberOfWeeks(month, weekStart) {\n  const firstDay = moment(month).startOf('month').day();\n  const offset = (firstDay - weekStart + 7) % 7;\n  const days = moment(month).daysInMonth();\n  return Math.ceil((offset + days) / 7);\n}\n\nexport default class Calendar extends Component {\n\n  state = {\n    currentMoment: moment(this.props.startDate),\n    selectedMoment: this.props.selectedDate && moment(this.props.selectedDate),\n    rowHeight: null,\n    containerWidth: null,\n  };\n\n  static propTypes = {\n    currentMonth: PropTypes.any,\n    customStyle: PropTypes.object,\n    dayHeadings: PropTypes.array,\n    eventDates: PropTypes.array,\n    monthNames: PropTypes.array,\n    nextButtonText: PropTypes.oneOfType([\n      PropTypes.string,\n      PropTypes.object\n    ]),\n    onDateSelect: PropTypes.func,\n    onDateLongPress: PropTypes.func,\n    onSwipeNext: PropTypes.func,\n    onSwipePrev: PropTypes.func,\n    onTouchNext: PropTypes.func,\n    onTouchPrev: PropTypes.func,\n    onTitlePress: PropTypes.func,\n    prevButtonText: PropTypes.oneOfType([\n      PropTypes.string,\n      PropTypes.object\n    ]),\n    removeClippedSubviews: PropTypes.bool,\n    scrollEnabled: PropTypes.bool,\n    selectedDate: PropTypes.any,\n    showControls: PropTypes.bool,\n    showEventIndicators: PropTypes.bool,\n    startDate: PropTypes.any,\n    titleFormat: PropTypes.string,\n    today: PropTypes.any,\n    weekStart: PropTypes.number,\n    calendarFormat: PropTypes.string\n  };\n\n  static defaultProps = {\n    customStyle: {},\n    dayHeadings: ['S', 'M', 'T', 'W', 'T', 'F', 'S'],\n    eventDates: [],\n    monthNames: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',\n      'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n    nextButtonText: 'Next',\n    prevButtonText: 'Prev',\n    removeClippedSubviews: true,\n    scrollEnabled: false,\n    showControls: false,\n    showEventIndicators: false,\n    startDate: moment().format('YYYY-MM-DD'),\n    titleFormat: 'MMMM YYYY',\n    weekStart: 1,\n    calendarFormat: 'monthly' // weekly or monthly\n  };\n\n  componentDidMount() {\n    // fixes initial scrolling bug on Android\n    setTimeout(() => this.scrollToItem(VIEW_INDEX), 0);\n  }\n\n  componentDidUpdate() {\n    this.scrollToItem(VIEW_INDEX);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.selectedDate && this.props.selectedDate !== nextProps.selectedDate) {\n      this.setState({ selectedMoment: nextProps.selectedDate });\n    }\n    if (nextProps.currentMonth) {\n      this.setState({ currentMoment: moment(nextProps.currentMonth) });\n    }\n  }\n\n  getStack(currentMoment) {\n    if (this.props.scrollEnabled) {\n      let i = -VIEW_INDEX;\n      const res = [];\n\n      for (i; i <= VIEW_INDEX; i++) {\n        if (this.props.calendarFormat === 'monthly') {\n          res.push(moment(currentMoment).add(i, 'month'));\n        } else {\n          res.push(moment(currentMoment).add(i, 'week'));\n        }\n      }\n      return res;\n    }\n    return [moment(currentMoment)];\n  }\n\n  prepareEventDates(eventDates, events) {\n    const parsedDates = {};\n\n    if (events) {\n      events.forEach(event => {\n        if (event.date) {\n          parsedDates[event.date] = event;\n        }\n      });\n    } else {\n      eventDates.forEach(event => {\n        parsedDates[event] = {};\n      });\n    }\n\n    return parsedDates;\n  }\n\n  selectDate(date) {\n    if (this.props.selectedDate === undefined) {\n      this.setState({ selectedMoment: date, currentMoment: date });\n    }\n  }\n\n  selectAndJumpToToday() {\n    const today = new Date();\n    const newMoment = moment(this.state.currentMoment).set('month', today.getMonth());\n    this.setState({\n      selectedMoment: today,\n      currentMoment: newMoment\n    });\n  }\n\n  onPrev = () => {\n    const newMoment = this.props.calendarFormat === 'monthly' ?\n      moment(this.state.currentMoment).subtract(1, 'month') :\n      moment(this.state.currentMoment).subtract(1, 'week');\n    this.setState({ currentMoment: newMoment });\n    this.props.onTouchPrev && this.props.onTouchPrev(newMoment);\n  }\n\n  onNext = () => {\n    const newMoment = this.props.calendarFormat === 'monthly' ?\n      moment(this.state.currentMoment).add(1, 'month') :\n      moment(this.state.currentMoment).add(1, 'week');\n    this.setState({ currentMoment: newMoment });\n    this.props.onTouchNext && this.props.onTouchNext(newMoment);\n  }\n\n  scrollToItem(itemIndex) {\n    const containerWidth = this.state.containerWidth;\n    if (containerWidth == null) {\n        return;\n    }\n    const scrollToX = itemIndex * containerWidth;\n    if (this.props.scrollEnabled && this._calendar) {\n      this._calendar.scrollTo({ y: 0, x: scrollToX, animated: false });\n    }\n  }\n\n  scrollEnded(event) {\n    const containerWidth = this.state.containerWidth;\n    if (containerWidth == null) {\n        return;\n    }\n    const position = event.nativeEvent.contentOffset.x;\n    const currentPage = position / containerWidth;\n    const newMoment = this.props.calendarFormat === 'monthly' ?\n      moment(this.state.currentMoment).add(currentPage - VIEW_INDEX, 'month') :\n      moment(this.state.currentMoment).add(currentPage - VIEW_INDEX, 'week');\n\n    this.setState({ currentMoment: newMoment });\n\n    if (currentPage < VIEW_INDEX) {\n      this.props.onSwipePrev && this.props.onSwipePrev(newMoment);\n    } else if (currentPage > VIEW_INDEX) {\n      this.props.onSwipeNext && this.props.onSwipeNext(newMoment);\n    }\n  }\n\n  onWeekRowLayout = (event) => {\n    if (this.state.rowHeight !== event.nativeEvent.layout.height) {\n      this.setState({ rowHeight: event.nativeEvent.layout.height });\n    }\n  }\n\n  getStartMoment(calFormat, currMoment) {\n    const weekStart = this.props.weekStart;\n\n    let res;\n    if (calFormat === 'monthly') {\n      res = moment(currMoment).startOf('month');\n    } else {\n      // weekly\n      let sundayMoment = moment(currMoment).startOf('week');\n      if (weekStart > 0) {\n        res = moment(currMoment).isoWeekday(weekStart);\n        if (res.diff(currMoment) > 0) {\n          res = moment(currMoment).subtract(7, 'day').isoWeekday(weekStart);\n        }\n      } else {\n        res = sundayMoment;\n      }\n    }\n    return res;\n  }\n\n  onContainerLayout = (event) => {\n    if (this.state.containerWidth !== event.nativeEvent.layout.width) {\n      this.setState({ containerWidth: event.nativeEvent.layout.width });\n    }\n  }\n\n  renderCalendarView(calFormat, argMoment, eventsMap) {\n    let renderIndex = 0,\n      weekRows = [],\n      days = [];\n\n    const startOfArgMoment = this.getStartMoment(calFormat, argMoment),\n      selectedMoment = moment(this.state.selectedMoment),\n      weekStart = this.props.weekStart,\n      todayMoment = moment(this.props.today),\n      todayIndex = todayMoment.date() - 1,\n      argDaysCount = calFormat === 'monthly' ? argMoment.daysInMonth() : 7,\n      offset = calFormat === 'monthly' ?\n        (startOfArgMoment.isoWeekday() - weekStart + 7) % 7 : 0,\n      selectedIndex = moment(selectedMoment).date() - 1;\n\n    do {\n      const dayIndex = renderIndex - offset;\n      const isoWeekday = (renderIndex + weekStart) % 7;\n      const thisMoment = moment(startOfArgMoment).add(dayIndex, 'day');\n\n      if (dayIndex >= 0 && dayIndex < argDaysCount) {\n        days.push((\n          this.renderDay({\n            startOfMonth: startOfArgMoment,\n            isWeekend: isoWeekday === 0 || isoWeekday === 6,\n            key: renderIndex,\n            onPress: () => {\n              this.selectDate(thisMoment);\n              this.props.onDateSelect && this.props.onDateSelect(thisMoment ? thisMoment.format() : null);\n            },\n            onLongPress: () => {\n              this.selectDate(thisMoment);\n              this.props.onDateLongPress && this.props.onDateLongPress(thisMoment ? thisMoment.format() : null);\n            },\n            caption: thisMoment.format('D'),\n            isToday: todayMoment.format('YYYY-MM-DD') === thisMoment.format('YYYY-MM-DD'),\n            isSelected: selectedMoment.isSame(thisMoment),\n            event: eventsMap[thisMoment.format('YYYY-MM-DD')] ||\n            eventsMap[thisMoment.format('YYYYMMDD')],\n            showEventIndicators: this.props.showEventIndicators,\n            customStyle: this.props.customStyle,\n          })\n        ));\n      } else {\n        days.push(\n          this.renderDay({\n            key: renderIndex,\n            filler: true,\n            customStyle: this.props.customStyle,\n          })\n        );\n      }\n      if (renderIndex % 7 === 6) {\n        weekRows.push(\n          <View\n            key={weekRows.length}\n            onLayout={weekRows.length ? undefined : this.onWeekRowLayout}\n            style={[styles.weekRow, this.props.customStyle.weekRow]}>\n            {days}\n          </View>);\n        days = [];\n        if (dayIndex + 1 >= argDaysCount) {\n          break;\n        }\n      }\n      renderIndex += 1;\n    } while (true)\n    const containerStyle = [\n        styles.monthContainer,\n        {width: this.state.containerWidth},\n        this.props.customStyle.monthContainer\n    ];\n    return <View key={`${startOfArgMoment.format('YYYY-MM-DD')}-${calFormat}`} style={containerStyle}>{weekRows}</View>;\n  }\n\n  renderDay(props) {\n    if (this.props.renderDay) {\n      return this.props.renderDay(props)\n    }\n    return <Day {...props} />\n  }\n\n  renderHeading() {\n    let headings = [];\n    let i = 0;\n\n    for (i; i < 7; ++i) {\n      const j = (i + this.props.weekStart) % 7;\n      headings.push(\n        <Text\n          key={i}\n          style={j === 0 || j === 6 ?\n            [styles.weekendHeading, this.props.customStyle.weekendHeading] :\n            [styles.dayHeading, this.props.customStyle.dayHeading]}\n        >\n          {this.props.dayHeadings[j]}\n        </Text>\n      );\n    }\n\n    return (\n      <View style={[styles.calendarHeading, this.props.customStyle.calendarHeading]}>\n        {headings}\n      </View>\n    );\n  }\n\n  renderTopBar() {\n    let localizedMonth = this.props.monthNames[this.state.currentMoment.month()];\n    return this.props.showControls\n      ? (\n        <View style={[styles.calendarControls, this.props.customStyle.calendarControls]}>\n          <TouchableOpacity\n            style={[styles.controlButton, this.props.customStyle.controlButton]}\n            onPress={this.onPrev}\n          >\n            <Text style={[styles.controlButtonText, this.props.customStyle.controlButtonText]}>\n              {this.props.prevButtonText}\n            </Text>\n          </TouchableOpacity>\n          <TouchableOpacity style={styles.title} onPress={() => this.props.onTitlePress && this.props.onTitlePress()}>\n            <Text style={[styles.titleText, this.props.customStyle.title]}>\n              {localizedMonth} {this.state.currentMoment.year()}\n            </Text>\n          </TouchableOpacity>\n          <TouchableOpacity\n            style={[styles.controlButton, this.props.customStyle.controlButton]}\n            onPress={this.onNext}\n          >\n            <Text style={[styles.controlButtonText, this.props.customStyle.controlButtonText]}>\n              {this.props.nextButtonText}\n            </Text>\n          </TouchableOpacity>\n        </View>\n      )\n      : (\n        <View style={[styles.calendarControls, this.props.customStyle.calendarControls]}>\n          <Text style={[styles.title, this.props.customStyle.title]}>\n            {this.state.currentMoment.format(this.props.titleFormat)}\n          </Text>\n        </View>\n      );\n  }\n\n  render() {\n    const containerStyle = [\n        styles.calendarContainer,\n        this.props.customStyle.calendarContainer\n    ];\n    if (this.state.containerWidth == null) {\n        return <View onLayout={this.onContainerLayout} style={containerStyle} />;\n    }\n    const calendarDates = this.getStack(this.state.currentMoment);\n    const eventDatesMap = this.prepareEventDates(this.props.eventDates, this.props.events);\n    const numOfWeeks = this.props.calendarFormat === 'weekly' ? 1 :\n      getNumberOfWeeks(this.state.currentMoment, this.props.weekStart);\n\n    return (\n      <View onLayout={this.onContainerLayout} style={containerStyle}>\n        {this.renderTopBar()}\n        {this.renderHeading(this.props.titleFormat)}\n        {this.props.scrollEnabled ?\n          <ScrollView\n            ref={calendar => this._calendar = calendar}\n            horizontal\n            scrollEnabled\n            pagingEnabled\n            removeClippedSubviews={this.props.removeClippedSubviews}\n            scrollEventThrottle={1000}\n            showsHorizontalScrollIndicator={false}\n            automaticallyAdjustContentInsets={false}\n            onMomentumScrollEnd={(event) => this.scrollEnded(event)}\n            style={{\n              height: this.state.rowHeight ? this.state.rowHeight * numOfWeeks : null,\n            }}\n          >\n            {calendarDates.map((date) => this.renderCalendarView(this.props.calendarFormat, moment(date), eventDatesMap))}\n          </ScrollView>\n          :\n          <View ref={calendar => this._calendar = calendar}>\n            {calendarDates.map((date) => this.renderCalendarView(this.props.calendarFormat, moment(date), eventDatesMap))}\n          </View>\n        }\n      </View>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}